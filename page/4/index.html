<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="IT，Life" />
   
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Spark的博客
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>

  

  

</head>

</html>

<body>
  <div id="app">
    <main class="content">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank"><img width="149" height="149" src="/images/forkme.png" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame">
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Spark的博客</a></h1>
      <h2>一生挨踢，永远学习，坚守信仰，简单活着</h2>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>

<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article id="post-etcd实践" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal="">

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/10/etcd实践/">etcd实践</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/04/10/etcd实践/" class="article-date">
  <time datetime="2019-04-10T07:31:30.000Z" itemprop="datePublished">2019-04-10</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p>cat &lt;&lt; EOF | tee server-csr.json<br>{<br>    “CN”: “etcd”,<br>    “hosts”: [<br>    “10.186.32.12”,<br>    “10.186.26.40”,<br>    “10.104.247.233”<br>    ],<br>    “key”: {<br>        “algo”: “rsa”,<br>        “size”: 2048<br>    },<br>    “names”: [<br>        {<br>            “C”: “CN”,<br>            “L”: “CS”,<br>            “ST”: “CS”<br>        }<br>    ]<br>}<br>EOF</p>
<p>cd /usr/local/src<br>tar zxvf etcd-v3.2.28-linux-amd64.tar.gz<br>cd etcd-v3.2.28-linux-amd64<br>cp etcd etcdctl /opt/etcd/bin/</p>
<p>cat &lt;&lt; EOF | tee /opt/etcd/cfg/etcd.conf</p>
<p>#[Member]<br>ETCD_NAME=”etcd01”<br>ETCD_DATA_DIR=”/var/lib/etcd/default.etcd”<br>ETCD_LISTEN_PEER_URLS=”<a href="https://10.186.26.40:2380&quot;" target="_blank" rel="noopener">https://10.186.26.40:2380&quot;</a><br>ETCD_LISTEN_CLIENT_URLS=”<a href="https://10.186.26.40:2379,http://127.0.0.1:2379&quot;" target="_blank" rel="noopener">https://10.186.26.40:2379,http://127.0.0.1:2379&quot;</a></p>
<p>#[Clustering]<br>ETCD_INITIAL_ADVERTISE_PEER_URLS=”<a href="https://10.186.26.40:2380&quot;" target="_blank" rel="noopener">https://10.186.26.40:2380&quot;</a><br>ETCD_ADVERTISE_CLIENT_URLS=”<a href="https://10.186.26.40:2379&quot;" target="_blank" rel="noopener">https://10.186.26.40:2379&quot;</a><br>ETCD_INITIAL_CLUSTER=”etcd01=<a href="https://10.186.26.40:2380,etcd02=https://10.186.32.12:2380,etcd03=https://10.104.247.233:2380&quot;" target="_blank" rel="noopener">https://10.186.26.40:2380,etcd02=https://10.186.32.12:2380,etcd03=https://10.104.247.233:2380&quot;</a><br>ETCD_INITIAL_CLUSTER_TOKEN=”etcd-cluster”<br>ETCD_INITIAL_CLUSTER_STATE=”new”</p>
<p>#[Security]<br>ETCD_CERT_FILE=”/opt/etcd/ssl/server.pem”<br>ETCD_KEY_FILE=”/opt/etcd/ssl/server-key.pem”<br>ETCD_TRUSTED_CA_FILE=”/opt/etcd/ssl/ca.pem”<br>ETCD_CLIENT_CERT_AUTH=”true”<br>ETCD_PEER_CERT_FILE=”/opt/etcd/ssl/server.pem”<br>ETCD_PEER_KEY_FILE=”/opt/etcd/ssl/server-key.pem”<br>ETCD_PEER_TRUSTED_CA_FILE=”/opt/etcd/ssl/ca.pem”<br>ETCD_PEER_CLIENT_CERT_AUTH=”true”<br>EOF</p>
<p>cat &lt;&lt; EOF | tee /opt/etcd/cfg/etcd.conf</p>
<p>#[Member]<br>ETCD_NAME=”etcd02”<br>ETCD_DATA_DIR=”/var/lib/etcd/default.etcd”<br>ETCD_LISTEN_PEER_URLS=”<a href="https://10.186.32.12:2380&quot;" target="_blank" rel="noopener">https://10.186.32.12:2380&quot;</a><br>ETCD_LISTEN_CLIENT_URLS=”<a href="https://10.186.32.12:2379,http://127.0.0.1:2379&quot;" target="_blank" rel="noopener">https://10.186.32.12:2379,http://127.0.0.1:2379&quot;</a></p>
<p>#[Clustering]<br>ETCD_INITIAL_ADVERTISE_PEER_URLS=”<a href="https://10.186.32.12:2380&quot;" target="_blank" rel="noopener">https://10.186.32.12:2380&quot;</a><br>ETCD_ADVERTISE_CLIENT_URLS=”<a href="https://10.186.32.12:2379&quot;" target="_blank" rel="noopener">https://10.186.32.12:2379&quot;</a><br>ETCD_INITIAL_CLUSTER=”etcd01=<a href="https://10.186.26.40:2380,etcd02=https://10.186.32.12:2380,etcd03=https://10.104.247.233:2380&quot;" target="_blank" rel="noopener">https://10.186.26.40:2380,etcd02=https://10.186.32.12:2380,etcd03=https://10.104.247.233:2380&quot;</a><br>ETCD_INITIAL_CLUSTER_TOKEN=”etcd-cluster”<br>ETCD_INITIAL_CLUSTER_STATE=”new”</p>
<p>#[Security]<br>ETCD_CERT_FILE=”/opt/etcd/ssl/server.pem”<br>ETCD_KEY_FILE=”/opt/etcd/ssl/server-key.pem”<br>ETCD_TRUSTED_CA_FILE=”/opt/etcd/ssl/ca.pem”<br>ETCD_CLIENT_CERT_AUTH=”true”<br>ETCD_PEER_CERT_FILE=”/opt/etcd/ssl/server.pem”<br>ETCD_PEER_KEY_FILE=”/opt/etcd/ssl/server-key.pem”<br>ETCD_PEER_TRUSTED_CA_FILE=”/opt/etcd/ssl/ca.pem”<br>ETCD_PEER_CLIENT_CERT_AUTH=”true”<br>EOF</p>
<p>cat &lt;&lt; EOF | tee /opt/etcd/cfg/etcd.conf</p>
<p>#[Member]<br>ETCD_NAME=”etcd03”<br>ETCD_DATA_DIR=”/var/lib/etcd/default.etcd”<br>ETCD_LISTEN_PEER_URLS=”<a href="https://10.104.247.233:2380&quot;" target="_blank" rel="noopener">https://10.104.247.233:2380&quot;</a><br>ETCD_LISTEN_CLIENT_URLS=”<a href="https://10.104.247.233:2379,http://127.0.0.1:2379&quot;" target="_blank" rel="noopener">https://10.104.247.233:2379,http://127.0.0.1:2379&quot;</a></p>
<p>#[Clustering]<br>ETCD_INITIAL_ADVERTISE_PEER_URLS=”<a href="https://10.104.247.233:2380&quot;" target="_blank" rel="noopener">https://10.104.247.233:2380&quot;</a><br>ETCD_ADVERTISE_CLIENT_URLS=”<a href="https://10.104.247.233:2379&quot;" target="_blank" rel="noopener">https://10.104.247.233:2379&quot;</a><br>ETCD_INITIAL_CLUSTER=”etcd01=<a href="https://10.186.26.40:2380,etcd02=https://10.186.32.12:2380,etcd03=https://10.104.247.233:2380&quot;" target="_blank" rel="noopener">https://10.186.26.40:2380,etcd02=https://10.186.32.12:2380,etcd03=https://10.104.247.233:2380&quot;</a><br>ETCD_INITIAL_CLUSTER_TOKEN=”etcd-cluster”<br>ETCD_INITIAL_CLUSTER_STATE=”new”</p>
<p>#[Security]<br>ETCD_CERT_FILE=”/opt/etcd/ssl/server.pem”<br>ETCD_KEY_FILE=”/opt/etcd/ssl/server-key.pem”<br>ETCD_TRUSTED_CA_FILE=”/opt/etcd/ssl/ca.pem”<br>ETCD_CLIENT_CERT_AUTH=”true”<br>ETCD_PEER_CERT_FILE=”/opt/etcd/ssl/server.pem”<br>ETCD_PEER_KEY_FILE=”/opt/etcd/ssl/server-key.pem”<br>ETCD_PEER_TRUSTED_CA_FILE=”/opt/etcd/ssl/ca.pem”<br>ETCD_PEER_CLIENT_CERT_AUTH=”true”<br>EOF</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://csspark.github.io/2019/04/10/etcd实践/" data-id="ck5d8fq2y0005gdgfh9wz2xqf" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/etcd/">etcd</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-K8S的日志分析与监控ingress" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal="">

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/10/K8S的日志分析与监控ingress/">K8S的日志分析与监控ingress</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/04/10/K8S的日志分析与监控ingress/" class="article-date">
  <time datetime="2019-04-10T07:30:57.000Z" itemprop="datePublished">2019-04-10</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      
      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://csspark.github.io/2019/04/10/K8S的日志分析与监控ingress/" data-id="ck5d8fq2s0001gdgfp1rmrmhm" class="article-share-link">分享</a>
      
    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-linux下配置代理访问谷歌" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal="">

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/09/linux下配置代理访问谷歌/">linux下配置代理访问谷歌</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/04/09/linux下配置代理访问谷歌/" class="article-date">
  <time datetime="2019-04-09T07:00:11.000Z" itemprop="datePublished">2019-04-09</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p>背景</p>
</blockquote>
<p>最近在实践K8S，因为很多地方需要访问谷歌，又不想设置阿里镜像，也不想用在node中pull国内镜像再打tag，所以就想利用手里有的香港服务器作为代理使用。</p>
<p>在MAC上和Linux上分别测试通过，特此记录一下，方便以后用于服务器curl get墙外资源或者docker等资源<br>环境：mac 10.14 centos7.2</p>
<blockquote>
<p>思路</p>
</blockquote>
<p>利用本地的SSR客户端，连接远程SS服务之后，此时的代理客户端会有一个socket5协议的代理，但是很多时候需要转变为http代理，可以利用privoxy之类的方案转化</p>
<blockquote>
<p>MAC</p>
</blockquote>
<p>一般安装有SSX_NG作为SSR的客户端管理。</p>
<p>在菜单http代理设置中可以设置ip为0.0.0.0，port为1087，这个port是你在设置后面http代理是用到的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=http://127.0.0.1:1087</span><br><span class="line">export https_proxy=http://127.0.0.1:1087</span><br><span class="line">export no_proxy=localhost</span><br><span class="line"></span><br><span class="line">之后可以用于kubenetes的安装镜像和k8s</span><br><span class="line">比如：</span><br><span class="line">minikube start --docker-env http_proxy=http://192.168.99.104:1087 --docker-env https_proxy=http://192.168.99.104:1087 --docker-env no_proxy=localhost,127.0.0.1,192.168.99.0/24 --log_dir=tmp</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>CENTOS 7</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1、安装SSR</span><br><span class="line">方案一、</span><br><span class="line">it clone https://github.com/SAMZONG/gfwlist2privoxy.git</span><br><span class="line">cd gfwlist2privoxy/</span><br><span class="line">mv ssr /usr/local/bin</span><br><span class="line">chmod +x /usr/local/bin/ssr</span><br><span class="line"></span><br><span class="line">ssr install</span><br><span class="line"></span><br><span class="line">ssr config #配置文件路径 /usr/local/share/shadowsocksr/config.json</span><br><span class="line"></span><br><span class="line">ssr start</span><br><span class="line">ssr stop</span><br><span class="line">ssr uninstall # 这里操作会删除/usr/local/share/shadowsocksr</span><br></pre></td></tr></table></figure>
<p>方案二、<br>安装electron_ssr<br>git clone <a href="https://github.com/erguotou520/electron-ssr.git" target="_blank" rel="noopener">https://github.com/erguotou520/electron-ssr.git</a></p>
<p>不详述，两个快捷键，如果有gnome界面的话，ctrl+shift+W显示隐藏界面，ctrl+shift+B显示隐藏菜单</p>
<p>显示菜单打开配置文件，这个直接带有http_proxy，看配置文件中的httProxyPort是什么，以后系统配置环境变量也要用这个<br>配置文件中的pacPort，一般用于代理为PAC模式。然后在网络设置中可以设置。也可以和上面一样export 设置环境变量。</p>
<p>其他设置与操作同MAC系统</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://csspark.github.io/2019/04/09/linux下配置代理访问谷歌/" data-id="ck5d8fq36000egdgfr5wk5z1f" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux-ssr-proxy/">linux,ssr,proxy</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-php-实时输出运行结果" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal="">

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/02/php-实时输出运行结果/">php 实时输出运行结果</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/04/02/php-实时输出运行结果/" class="article-date">
  <time datetime="2019-04-02T12:33:47.000Z" itemprop="datePublished">2019-04-02</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set_time_limit(0);</span><br><span class="line">ob_end_clean();</span><br><span class="line">ob_implicit_flush();</span><br><span class="line">header(&apos;X-Accel-Buffering: no&apos;); // 关键是加了这一行。</span><br><span class="line">echo &quot;something@@&quot;;</span><br></pre></td></tr></table></figure>
      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://csspark.github.io/2019/04/02/php-实时输出运行结果/" data-id="ck5d8fq3e000pgdgf61us36b4" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/PHP/">PHP</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-hexo-常用命令" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal="">

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/02/hexo-常用命令/">hexo 常用命令</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/04/02/hexo-常用命令/" class="article-date">
  <time datetime="2019-04-02T09:42:56.000Z" itemprop="datePublished">2019-04-02</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <p><a href="https://hexo.io/docs" target="_blank" rel="noopener">更多参考</a></p>
<blockquote>
<p>安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo</span><br><span class="line">npm update -g hexo</span><br><span class="line">hexo init</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>常用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">hexo n == hexo new &quot;a new post&quot;  新建文章，最好用双引号括起来</span><br><span class="line"></span><br><span class="line">hexo g == hexo generate     生成静态文件到public文件夹</span><br><span class="line"></span><br><span class="line">hexo s == hexo server    Server at localhost:4000，根目录为public</span><br><span class="line"></span><br><span class="line">hexo d == hexo deploy   部署到远程服务里，例如github</span><br><span class="line"></span><br><span class="line">hexo p == hexo publish  新建草稿draft</span><br><span class="line"></span><br><span class="line">hexo clean     清除缓存文件</span><br><span class="line"></span><br><span class="line">hexo new page &quot;about&quot;   生成 /source/about/index.md 文件</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>后端<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo server    默认为动态监听</span><br><span class="line"></span><br><span class="line">hexo server -s   静态模式</span><br><span class="line"></span><br><span class="line">hexo server -p 5000  指定端口</span><br><span class="line"></span><br><span class="line">hexo server -i 10.20.62.123   指定IP</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>文章摘要<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">方式1：在front-matter中编写</span><br><span class="line"></span><br><span class="line">description: &quot;This a digest bla bla...&quot; </span><br><span class="line"></span><br><span class="line">方式2</span><br><span class="line"></span><br><span class="line">在文章中插入一行  &lt;!--more--&gt;  以上部分为摘要</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>添加sitemap<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br><span class="line"></span><br><span class="line">_config.yml</span><br><span class="line"></span><br><span class="line">sitemap:</span><br><span class="line">    path: sitemap.xml</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>更多<br><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/</a></p>
</blockquote>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://csspark.github.io/2019/04/02/hexo-常用命令/" data-id="ck5d8fq300008gdgfjw7t5xfl" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-Kubernates之旅-环境篇" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal="">

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2019/04/02/Kubernates之旅-环境篇/">Kubernates之旅-环境篇</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2019/04/02/Kubernates之旅-环境篇/" class="article-date">
  <time datetime="2019-04-02T08:35:28.000Z" itemprop="datePublished">2019-04-02</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <blockquote>
<p>平台</p>
<ul>
<li>centos 7.2</li>
</ul>
</blockquote>
<blockquote>
<p>安装内核</p>
</blockquote>
<blockquote>
<p>安装virtualBox</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget -q https://www.virtualbox.org/download/oracle_vbox.asc -O- | rpm --import -</span><br><span class="line"></span><br><span class="line">wget https://download.virtualbox.org/virtualbox/6.0.4/VirtualBox-6.0-6.0.4_128413_el7-1.x86_64.rpm</span><br><span class="line"></span><br><span class="line">rpm -ivh VirtualBox-6.0-6.0.4_128413_el7-1.x86_64.rpm</span><br></pre></td></tr></table></figure>
<blockquote>
<p>安装kubectl</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl</span><br><span class="line"></span><br><span class="line">chmod +x ./kubectl</span><br><span class="line"></span><br><span class="line">mv ./kubectl /usr/local/bin/kubectl</span><br></pre></td></tr></table></figure>
<blockquote>
<p>安装minikube</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64 \</span><br><span class="line"> &amp;&amp; chmod +x minikube</span><br><span class="line">mv minikube /usr/local/bin</span><br></pre></td></tr></table></figure>
<blockquote>
<p>设置代理安装单节点集群<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#将本地SSR开启http代理，设置IP：0.0.0.0</span><br><span class="line">#参考：https://www.jianshu.com/p/48804c8bb250</span><br><span class="line"></span><br><span class="line">export http_proxy=http://127.0.0.1:1087;export https_proxy=http://127.0.0.1:1087;</span><br><span class="line">export no_proxy=192.168.99.0/24</span><br><span class="line"></span><br><span class="line">minikube start --docker-env http_proxy=http://192.168.99.1:1087 --docker-env https_proxy=http://192.168.99.1:1087 --docker-env no_proxy=localhost,127.0.0.1,192.168.99.0/24 --log_dir=tmp </span><br><span class="line">#linux代理参考：https://samzong.me/2017/11/17/howto-use-ssr-on-linux-terminal/</span><br><span class="line">#mac安装参考https://github.com/Unknwon/wuwen.org/issues/20</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>新建pod</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/acinwinstack/k8s-concept-demo.git</span><br><span class="line"></span><br><span class="line">cd k8s-concept-demo</span><br><span class="line"></span><br><span class="line">kubectl apply -f pod.yml</span><br><span class="line">kubectl apply -f service.yml</span><br><span class="line"></span><br><span class="line">kubectl cluster-info</span><br><span class="line">kubectl get svc</span><br><span class="line"></span><br><span class="line">pod 设定用什么镜像构建容器，容器端口是什么，但还是不提供服务</span><br><span class="line">service 根据selector参数判断为哪个pod提供服务，对外提供什么端口，复制多少份提供服务，节点类型是什么？如果是NodePort就一般是3万以上的端口</span><br><span class="line">节点类型还有clusterIP【用于minion节点中容器与容器，pod与pod，或者container与pod之间通信】，loadbalancer【对外部loadbalance提供】</span><br><span class="line"></span><br><span class="line">外部访问就根据集群的ip+service暴露的端口访问</span><br></pre></td></tr></table></figure>
<blockquote>
<p>deployment pod svc区别</p>
</blockquote>
<blockquote>
<p>yaml文档注释<br>CNI 做的事情就是管理container，pod，service，host之间的通信，转发等相关工作<br>怎么做呢，可以在一份部署的yaml文档中看到<br>看一份k8s的service 部署文档,因为向外暴露的是service<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-svc</span><br><span class="line">spec:</span><br><span class="line">  ports:</span><br><span class="line">  - port: 80</span><br><span class="line">    name: http</span><br><span class="line">    targetPort: 80</span><br><span class="line">    protocol: TCP</span><br><span class="line">  selector:</span><br><span class="line">    app: concept-terms</span><br><span class="line">  type: NodePort</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>参考pod 文档<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Pod</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx</span><br><span class="line">  labels:</span><br><span class="line">    app: concept-terms</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - name: web</span><br><span class="line">    image: nginx</span><br><span class="line">    ports:</span><br><span class="line">    - containerPort: 80</span><br></pre></td></tr></table></figure></p>
<p>service 中的port会根据selector去查找节点中的pod里labels项含有相同值的，然后在把port对应上target port，type有四种，nodeport会随机给一个30000以上的端口</p>
<p>cluster ip</p>
<pre><code>pod 与pod之间的通信
</code></pre><p>对外提供服务<br>loadbalance<br>noddeport</p>
<p><img src="https://spark-1300032833.cos.ap-guangzhou.myqcloud.com/blog/2019-11-21-v1zvma.png" alt="kubernets网络通信"></p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://csspark.github.io/2019/04/02/Kubernates之旅-环境篇/" data-id="ck5d8fq2x0004gdgf11d636hn" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kubernates-k8s-VirtualBox-minicube/">kubernates,k8s,VirtualBox,minicube</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-分布式ID实践" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal="">

  <div class="article-inner">
    

    
    <div class="article-meta">
      <a href="/2018/12/28/分布式ID实践/" class="article-date">
  <time datetime="2018-12-28T01:45:49.245Z" itemprop="datePublished">2018-12-28</time>
</a>
      
      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h2 id="分布式ID特点"><a href="#分布式ID特点" class="headerlink" title="分布式ID特点"></a>分布式ID特点</h2><ul>
<li>递增趋势</li>
<li>唯一</li>
<li><p>最好自带时间属性</p>
<p>  分布式id唯一性好理解，但如果只有唯一性，那么有些需要用到排序的时候，就还需要新建一个时间字段的普通索引。效率会下降，那么如果id能自带时间属性，递增的趋势，同时又唯一呢？只要建立一个id字段的聚集索引就行。</p>
<p>  方案很多，记录一下php端的snowflake算法</p>
<p>  纯PHP无法实现SnowFlake算法，因为线程安全版本(需要tid)和非线程安全版本(需要pid)不能生成相同格式的id(本项目的tid是系统中唯一的所以不用担心多个进程中tid冲突)，不能生成相同格式就不方便查询，并且PHP作为脚本语言无法维护sequence，当脚本结束的时候sequence又要被初始化，所以在大并发情况纯PHP实现的版本SnowFlake算法根本没有什么作用。所以就诞生了这个项目，以下为线程安全版本和非线程安全版本差别。</p>
<p>  <a href="https://github.com/Sxdd/php_snowflake" target="_blank" rel="noopener">github</a></p>
</li>
</ul>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://csspark.github.io/2018/12/28/分布式ID实践/" data-id="ck5d8fq3r001dgdgf12d7trpm" class="article-share-link">分享</a>
      
    </footer>

  </div>

  

  
  
  

  

</article>
    
    <article id="post-mycat旧项目改造1" class="article article-type-post" itemscope="" itemprop="blogPost" data-scroll-reveal="">

  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2018/12/20/mycat旧项目改造1/">mycat旧项目改造</a>
</h2>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/12/20/mycat旧项目改造1/" class="article-date">
  <time datetime="2018-12-20T06:23:20.000Z" itemprop="datePublished">2018-12-20</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/categories/mysql/">mysql</a> / <a class="article-category-link" href="/categories/mysql/db/">db</a>
  </div>

      
      
      
    </div>
    

    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="mycat对一个就项目数据库的改造"><a href="#mycat对一个就项目数据库的改造" class="headerlink" title="mycat对一个就项目数据库的改造"></a>mycat对一个就项目数据库的改造</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>一个项目的单表数据达到700W，考虑到日增长在2W左右，需要考虑分片，经过调研，为了系统解耦，决定采用引入中间件mycat的方案</p>
<h2 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h2><h3 id="搭建实验环境"><a href="#搭建实验环境" class="headerlink" title="搭建实验环境"></a>搭建实验环境</h3><p>mycat service: 10.10.10.245</p>
<p>mysql: 10.10.10.10 &amp; 10.10.10.9<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">1、mycat </span><br><span class="line">wget http://dl.mycat.io/1.6.6.1/Mycat-server-1.6.6.1-release-20181031195535-linux.tar.gz</span><br><span class="line"></span><br><span class="line">tar zxvf Mycat-server-1.6.6.1-release-20181031195535-linux.tar.gz</span><br><span class="line">mv Mycat... /usr/local/mycat</span><br><span class="line"></span><br><span class="line">2、mysql</span><br><span class="line">10.10.10.10为主库</span><br><span class="line">10.10.10.9为从库</span><br><span class="line"></span><br><span class="line">2.1、先在主库上操作</span><br><span class="line">docker pull mysql:5.7</span><br><span class="line"></span><br><span class="line">mkdir -p /data/docker/mysql/3306</span><br><span class="line"></span><br><span class="line">vi mysqld.cnf</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">gtid_mode=on</span><br><span class="line">enforce_gtid_consistency=on</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">server-id=1</span><br><span class="line">replicate-ignore-db=mysql</span><br><span class="line">log_slave_updates=1</span><br><span class="line">lower_case_table_names=1</span><br><span class="line"></span><br><span class="line">docker run --name mlink-mysql -v /data/docker/mysql/3306:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=mlink7749 -e MYSQL_DATABASE=mlink -p 3306:3306 -d mysql:5.7</span><br><span class="line"></span><br><span class="line">docker exec -it mlink-mysql /bin/bash</span><br><span class="line"></span><br><span class="line">mysql -uroot -pmlink7749</span><br><span class="line"></span><br><span class="line">CREATE USER &apos;repl&apos;@&apos;%&apos; IDENTIFIED BY &apos;mlink7749&apos;;</span><br><span class="line"></span><br><span class="line">GRANT REPLICATION SLAVE ON *.* TO &apos;repl&apos;@&apos;%&apos;; </span><br><span class="line">flush privileges; </span><br><span class="line"></span><br><span class="line">2.2、再在主库上操作</span><br><span class="line">docker pull mysql:5.7</span><br><span class="line"></span><br><span class="line">mkdir -p /data/docker/mysql/3306</span><br><span class="line"></span><br><span class="line">vi mysqld.cnf</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">gtid_mode=on</span><br><span class="line">enforce_gtid_consistency=on</span><br><span class="line">log-bin=mysql-bin</span><br><span class="line">server-id=2</span><br><span class="line">replicate-ignore-db=mysql</span><br><span class="line">log_slave_updates=1</span><br><span class="line">lower_case_table_names=1</span><br><span class="line"></span><br><span class="line">docker run --name mlink-mysql -v /data/docker/mysql/3306:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=mlink7749 -e MYSQL_DATABASE=mlink -p 3306:3306 -d mysql:5.7</span><br><span class="line"></span><br><span class="line">docker exec -it mlink-mysql /bin/bash</span><br><span class="line"></span><br><span class="line">mysql -uroot -pmlink7749</span><br><span class="line"></span><br><span class="line">CHANGE MASTER TO </span><br><span class="line">　　　MASTER_HOST = &apos;10.10.10.10&apos;, </span><br><span class="line">　　　MASTER_PORT = 3308, </span><br><span class="line">　　　MASTER_USER = &apos;repl&apos;, </span><br><span class="line">　　　MASTER_PASSWORD = &apos;mlink7749&apos;, </span><br><span class="line">　　　MASTER_AUTO_POSITION = 1;</span><br><span class="line"></span><br><span class="line">start slave;</span><br></pre></td></tr></table></figure></p>
<h2 id="配置mycat"><a href="#配置mycat" class="headerlink" title="配置mycat"></a>配置mycat</h2><h3 id="在mycat-server上操作"><a href="#在mycat-server上操作" class="headerlink" title="在mycat server上操作"></a>在mycat server上操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/mycat/conf/</span><br><span class="line"></span><br><span class="line">vi server.xml</span><br><span class="line"></span><br><span class="line">&lt;user name=<span class="string">"root"</span> defaultAccount=<span class="string">"true"</span>&gt;</span><br><span class="line">		&lt;property name=<span class="string">"password"</span>&gt;mlink7749&lt;/property&gt;</span><br><span class="line">		&lt;property name=<span class="string">"schemas"</span>&gt;MLINKDB&lt;/property&gt;</span><br><span class="line">&lt;/user&gt;</span><br><span class="line"></span><br><span class="line"> vi schema.xml</span><br><span class="line"></span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE mycat:schema SYSTEM <span class="string">"schema.dtd"</span>&gt;</span><br><span class="line">&lt;mycat:schema xmlns:mycat=<span class="string">"http://io.mycat/"</span>&gt;</span><br><span class="line">	&lt;schema name=<span class="string">"MLINKDB"</span> checkSQLschema=<span class="string">"false"</span> sqlMaxLimit=<span class="string">"100"</span> dataNode=<span class="string">"dn0"</span>&gt;</span><br><span class="line">		&lt;table name=<span class="string">"mlink_log_visitor"</span> dataNode=<span class="string">"dn1,dn2,dn3,dn4"</span> rule=<span class="string">"auto-sharding-long"</span> /&gt;</span><br><span class="line">	&lt;/schema&gt;</span><br><span class="line">	&lt;dataNode name=<span class="string">"dn0"</span> dataHost=<span class="string">"localhost"</span> database=<span class="string">"mlink"</span> /&gt;</span><br><span class="line">	&lt;dataNode name=<span class="string">"dn1"</span> dataHost=<span class="string">"localhost1"</span> database=<span class="string">"mlink_visitor1"</span> /&gt;</span><br><span class="line">	&lt;dataNode name=<span class="string">"dn2"</span> dataHost=<span class="string">"localhost1"</span> database=<span class="string">"mlink_visitor2"</span> /&gt;</span><br><span class="line">	&lt;dataNode name=<span class="string">"dn3"</span> dataHost=<span class="string">"localhost1"</span> database=<span class="string">"mlink_visitor3"</span> /&gt;</span><br><span class="line">	&lt;dataNode name=<span class="string">"dn4"</span> dataHost=<span class="string">"localhost1"</span> database=<span class="string">"mlink_visitor4"</span> /&gt;</span><br><span class="line">	&lt;dataHost name=<span class="string">"localhost1"</span> maxCon=<span class="string">"100000"</span> minCon=<span class="string">"10"</span> balance=<span class="string">"0"</span> writeType=<span class="string">"0"</span> dbType=<span class="string">"mysql"</span> dbDriver=<span class="string">"native"</span> switchType=<span class="string">"1"</span>  slaveThreshold=<span class="string">"100"</span>&gt;</span><br><span class="line">		&lt;heartbeat&gt;select 1&lt;/heartbeat&gt;</span><br><span class="line">		&lt;writeHost host=<span class="string">"hostM1"</span> url=<span class="string">"10.10.10.10:3306"</span> user=<span class="string">"root"</span> password=<span class="string">"mlink7749"</span>&gt;</span><br><span class="line">		&lt;/writeHost&gt;</span><br><span class="line">	&lt;/dataHost&gt;</span><br><span class="line">	&lt;dataHost name=<span class="string">"localhost"</span> maxCon=<span class="string">"100000"</span> minCon=<span class="string">"10"</span> balance=<span class="string">"0"</span> writeType=<span class="string">"0"</span> dbType=<span class="string">"mysql"</span> dbDriver=<span class="string">"native"</span> switchType=<span class="string">"1"</span>  slaveThreshold=<span class="string">"100"</span>&gt;</span><br><span class="line">		&lt;heartbeat&gt;select 1&lt;/heartbeat&gt;</span><br><span class="line">		&lt;writeHost host=<span class="string">"hostM2"</span> url=<span class="string">"10.10.10.9:3306"</span> user=<span class="string">"mlink"</span> password=<span class="string">"MmcQCpbHiM"</span>&gt;</span><br><span class="line">		&lt;/writeHost&gt;</span><br><span class="line">	&lt;/dataHost&gt;</span><br><span class="line">&lt;/mycat:schema&gt;</span><br></pre></td></tr></table></figure>
<p>使用mycat需要清楚的几个问题：</p>
<ul>
<li>如何分片利于扩展和查询</li>
<li>插入的全局分布式ID方案</li>
<li>高可用设计</li>
<li>分页问题</li>
<li>join</li>
</ul>
<p>visitor表是用于记载用户访问日志的表，<br>有鲜明的时间分区性质，也有冷热数据分区性质</p>

      
      <!-- 打赏 -->
      
    </div>
    <footer class="article-footer">
      <a data-url="http://csspark.github.io/2018/12/20/mycat旧项目改造1/" data-id="ck5d8fq39000ggdgf4ggyd5sj" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mycat/">mycat</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li></ul>

    </footer>

  </div>

  

  
  
  

  

</article>
    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2015-2020
        Spark
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <ul class="list-inline">
  <li>PV:<span id="busuanzi_value_page_pv"></span></li>
  <li>UV:<span id="busuanzi_value_site_uv"></span></li>
</ul>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src="https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914"></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
    
      <aside class="sidebar">
        
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Spark的博客"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">目录</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/旅行/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

  <script src="/fancybox/jquery.fancybox.min.js"></script>




<script>
  var ayerConfig = {
    mathjax: false
  }
</script>

<script src="/js/ayer.js"></script>

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">



<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  
  

  </div>
</body>

</html>